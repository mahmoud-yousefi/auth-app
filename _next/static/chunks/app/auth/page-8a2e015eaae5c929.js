(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{210:(e,r,t)=>{"use strict";t.d(r,{CK:()=>a,bp:()=>o,iB:()=>s});let s=e=>{localStorage.setItem("user",JSON.stringify(e))},a=()=>{{let e=localStorage.getItem("user");return e?JSON.parse(e):null}},o=()=>{localStorage.removeItem("user")}},507:e=>{e.exports={button:"Button_button__8B4nB"}},2381:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>m});var s=t(5155),a=t(2115),o=t(5695),l=t(8443),n=t(6081),i=t.n(n);let c=e=>{let{value:r,onChange:t,placeholder:a,error:o,type:l}=e;return(0,s.jsxs)("div",{className:i().inputContainer,children:[(0,s.jsx)("input",{type:l,value:r,onChange:t,placeholder:a,className:i().input}),o&&(0,s.jsx)("span",{className:i().error,children:o})]})};var u=t(9478),h=t.n(u),d=t(210);let p={phone:{empty:"شماره تلفن نمی‌تواند خالی باشد",invalid:"لطفاً شماره تلفن معتبر ایران وارد کنید (09xxxxxxxxx)"},password:{empty:"رمز عبور نمی‌تواند خالی باشد",invalid:"رمز عبور باید حداقل ۶ کاراکتر باشد"},serverError:"خطا در ارتباط با سرور"},_=e=>{if(!e)return{isValid:!1,error:p.phone.empty};let r=/^09[0-9]{9}$/;return{isValid:r.test(e),error:r.test(e)?"":p.phone.invalid}},x=e=>e?{isValid:e.length>=6,error:e.length>=6?"":p.password.invalid}:{isValid:!1,error:p.password.empty},g={baseUrl:"https://randomuser.me/api/?results=1&nat=us"},m=()=>{console.log("[AuthPage] Component mounted");let e=(0,o.useRouter)(),[r,t]=(0,a.useState)(""),[n,i]=(0,a.useState)(""),[u,m]=(0,a.useState)(!1),[v,f]=(0,a.useState)(""),[j,b]=(0,a.useState)(!1),[N,w]=(0,a.useState)(""),[k,S]=(0,a.useState)({isValid:!0,error:""}),[y,C]=(0,a.useState)({isValid:!0,error:""});(0,a.useEffect)(()=>{S(_(r)),C(x(n))},[r,n]);let V=async r=>{if(r.preventDefault(),f(""),w(""),console.log("[AuthPage] Handle login triggered"),!k.isValid){f(k.error),console.log("[AuthPage] Phone validation failed:",k.error);return}if(!y.isValid){f(y.error),console.log("[AuthPage] Password validation failed:",y.error);return}b(!0);try{console.log("[AuthPage] Fetching from:",g.baseUrl);let r=await fetch(g.baseUrl);if(!r.ok)throw Error(p.serverError);let t=(await r.json()).results[0];console.log("[AuthPage] User fetched:",t),(0,d.iB)(t),w("ورود با موفقیت انجام شد! در حال انتقال..."),console.log("[AuthPage] Redirecting to /dashboard"),setTimeout(()=>e.push("/dashboard"),1e3)}catch(e){f(p.serverError),console.error("[AuthPage] Fetch error:",e)}finally{b(!1)}};return(0,s.jsx)("div",{className:h().container,children:(0,s.jsxs)("div",{className:h().card,children:[(0,s.jsx)("div",{className:h().logo,children:(0,s.jsx)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#007bff",children:(0,s.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),(0,s.jsx)("h1",{className:h().title,children:"ورود به سیستم"}),(0,s.jsxs)("form",{className:h().form,onSubmit:V,children:[(0,s.jsx)(c,{value:r,onChange:e=>{t(e.target.value),f("")},placeholder:"شماره تلفن (09xxxxxxxxx)",error:v&&k.error?v:""}),(0,s.jsx)(c,{value:n,onChange:e=>{i(e.target.value),f("")},placeholder:"رمز عبور",type:"password",error:v&&y.error?v:""}),(0,s.jsxs)("div",{className:h().options,children:[(0,s.jsxs)("label",{className:h().checkbox,children:[(0,s.jsx)("input",{type:"checkbox",checked:u,onChange:e=>m(e.target.checked)}),(0,s.jsx)("span",{children:"مرا به خاطر بسپار"})]}),(0,s.jsx)("a",{href:"#",className:h().forgot,children:"فراموشی رمز عبور؟"})]}),N&&(0,s.jsx)("p",{className:h().success,children:N}),v&&!N&&(0,s.jsx)("p",{className:h().error,children:v}),(0,s.jsx)(l.A,{disabled:j,children:j?(0,s.jsx)("span",{className:h().spinner,children:(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,s.jsx)("path",{d:"M12 4V2m0 20v-2m8-8h2m-20 0H2m16.364-6.364l-1.414-1.414M7.05 17.05l-1.414-1.414m12.728 0l-1.414 1.414M7.05 7.05l-1.414 1.414",stroke:"white",strokeWidth:"2"})})}):"ورود"})]})]})})}},3226:(e,r,t)=>{Promise.resolve().then(t.bind(t,2381))},5695:(e,r,t)=>{"use strict";var s=t(8999);t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},6081:e=>{e.exports={inputContainer:"Input_inputContainer__dwNEC",input:"Input_input__rpj7R",error:"Input_error__ZVq7J"}},8443:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var s=t(5155);t(2115);var a=t(507),o=t.n(a);let l=e=>{let{onClick:r,children:t,disabled:a}=e;return(0,s.jsx)("button",{className:o().button,onClick:r,disabled:a,children:t})}},9478:e=>{e.exports={container:"auth_container__Gyy4k",card:"auth_card__OpYUT",logo:"auth_logo__5iDvC",title:"auth_title__3fpaZ",form:"auth_form__KcDhW",options:"auth_options__rDVfw",checkbox:"auth_checkbox__UY9Lb",forgot:"auth_forgot__gpnFe",success:"auth_success__hwOWL",error:"auth_error__SBJ0w",spinner:"auth_spinner__swVyG",spin:"auth_spin__IBSNL"}}},e=>{var r=r=>e(e.s=r);e.O(0,[883,441,684,358],()=>r(3226)),_N_E=e.O()}]);